spring.application.name=demo-spring-kotlin
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}
spring.threads.virtual.enabled=true

# PostgreSQL Database Configuration (wrapped with P6Spy for SQL logging with parameters)
spring.datasource.url=${DATABASE_URL:jdbc:p6spy:postgresql://localhost:6789/postgres}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:postgres}
spring.datasource.hikari.maximum-pool-size=${DATABASE_MAX_POOL_SIZE:10}
spring.datasource.driver-class-name=com.p6spy.engine.spy.P6SpyDriver


# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.properties.hibernate.default_batch_fetch_size=50
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Show SQL bind parameters
spring.jpa.properties.hibernate.use_sql_comments=true

# Enable Hibernate statistics to detect N+1 queries
spring.jpa.properties.hibernate.generate_statistics=true

# Temporal Configuration
spring.temporal.connection.target=${TEMPORAL_HOST:localhost}:${TEMPORAL_PORT:7233}
spring.temporal.namespace=${TEMPORAL_NAMESPACE:default}
spring.temporal.task-queue=${TEMPORAL_TASK_QUEUE:default}



# Structured logging with logstash format
logging.structured.format.console=logstash
logging.structured.format.file=logstash

# Reduce logging verbosity
logging.level.root=WARN
logging.level.com.github.alexisvisco=INFO
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.org.apache.catalina=WARN
logging.level.io.temporal=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.springframework.data=WARN
logging.level.org.springframework.orm=WARN

# Detailed Hibernate logging (P6Spy handles SQL logging with parameters)
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.hibernate.orm.jdbc.bind=WARN
logging.level.org.hibernate.stat=INFO

# Disable Spring Boot banner
spring.main.banner-mode=off

spring.mail.host=${MAIL_HOST:mailpit}
spring.mail.port=${MAIL_PORT:1025}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${MAIL_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_STARTTLS:false}

# S3/MinIO Configuration
spring.content.s3.bucket=${S3_BUCKET:attachments}
spring.content.s3.region=${S3_REGION:us-east-1}
spring.content.storage.type.default=s3

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
